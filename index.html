<html>
<head>
	<title>mvdb jQuery test</title>
	
	<script type="text/javascript" src="vendor/jquery-1.11.2.min.js"></script>
	<script type="text/javascript" src="vendor/jquery.dynatable.js"></script>
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap-2.3.2.min.css">
	<link rel="stylesheet" type="text/css" href="vendor/jquery.dynatable.css">
    <link rel="stylesheet" type="text/css" href="style.css">

    <script type="text/javascript">
	function ulReader(index, li, record) {
	  // record.thumbnail = $li.find('.thumbnail-image').html();
	  // record.caption = $caption.html();
	  // record.label = $caption.find('h3').text();
	  // record.description = $caption.find('p').text();
	  // record.color = $li.data('color');
	  console

    </script>
    <!-- <link rel="stylesheet" media="all" href="https://s3.amazonaws.com/dynatable-docs-assets/css/application.css" /> -->
    <!-- <link rel="stylesheet" media="all" href="https://s3.amazonaws.com/dynatable-docs-assets/css/pygments.css" /> -->
<!--     <link rel="stylesheet" media="all" href="https://s3.amazonaws.com/dynatable-docs-assets/css/share.css" />
 --> 	
</head>

<body>
	<div id="movdb">
		<span id="runtime-filter">
			Max runtime (min):
			<input id="max-price" type="number" step="10" min="0" data-dynatable-query="max-price" style="height: 30px;"></input>
		</span>
		<table id="my-tab" class="table table-bordered">
			<thead>
		    	<th data-dynatable-column="movieLink">Movie</th>
		    	<!-- <th>movie Imdb</th> -->
		    	<!-- <th>id</th> -->
		    	<th>Rating</th>
		    	<th data-dynatable-column="runtime">Runtime (min)</th>

		    	<!-- <th>Width</th> -->
		    	<!-- <th>Height</th> -->
		    	<th data-dynatable-column="bitrateKbps">bitrate (kbps)</th>
		    	<!-- <th>Format</th> -->
		    	<!-- <th>Release Group</th> -->
		    	<th>File Type</th>
		    	<th>File Size</th>
		  	</thead>
		  	
		  	<tbody></tbody>
		</table>
	</div>
	<script type="text/javascript">

		var mv_db_raw = $.ajax({
		dataType: "json",
		url: "json_data/mvdata.json",
		mimeType: "application/json",
		success: function(result)
			{
				console.log( "success" );
				$('#my-tab').bind(
  					'dynatable:init', function(e, dynatable) 
					{
						dynatable.queries.functions['max-price'] = function(record, queryValue) 
						{
        					return record.runtime <= parseFloat(queryValue);
        				};
        			})
				.dynatable(
				{
					dataset: { records: result},
					features: {
						paginate: true,
						recordCount: true,
						sorting: true,
						search: true
					},
					inputs: {
						queries: $('#max-price'),
						processingText: 'Loading <img src="/images/loading.gif" />'
					}
				});
			}
		});
		console.log( "success 2" );
// $('#search-function-example').bind(
//   'dynatable:init', function(e, dynatable) 
//   {
//     dynatable.queries.functions['max-price'] = function(record, queryValue) 
//       {
//         return parseFloat(record.price.replace(/,/,'')) <= parseFloat(queryValue);
//       };
//   })
// .dynatable({
// 	features: {
// 		paginate: false,
// 		recordCount: false,
// 		sorting: false,
// 		search: false
//   },
//   inputs: {
//     queries: $('#max-price')
//   }
// });


	</script>



</body>
</html>

